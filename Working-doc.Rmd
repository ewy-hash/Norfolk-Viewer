---
title: "Working-doc"
output: html_document
---

```{r}
library(tidyverse)
library(tidyterra)
library(sf)
library(terra)
unclean.norf <- rast("Data/VA_Southern_GCS_3m_NAVDm.tif")
bbox <- ext(c(xmin = -76.389548, xmax = -76.154689, ymin = 36.834249, ymax = 36.971082))
unclean.norf.masked <- mask(unclean.norf, bbox, )
unclean.norf.trimmed <- trim(unclean.norf.masked)
plot(unclean.norf.trimmed)
writeRaster(unclean.norf.trimmed, "Data/unclean-norf-trimmed.tif", overwrite = TRUE)
ggplot()+
  geom_spatraster(data = unclean.norf.trimmed)
ggsave(filename = "norfolk-initial.png", path = "Plots/")


#this is to filter for certain elevations. needs to be re ran each change.
unclean.norf.trimmed.filtered <- unclean.norf.trimmed
unclean.norf.trimmed.filtered[unclean.norf.trimmed.filtered >= 2] <- NA #change this
#for different elevations, not sure what unit it is yet
plot(unclean.norf.trimmed.filtered)



#im thinking we can use this functino from terra called sieve() to filter the unconnected low-lying areas and make them a different color or also more likely the function terra::patches() !!!!!
```
